# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è JSON-–≥–µ–æ–∫–æ–¥–µ—Ä–∞ –≤ –ø—Ä–æ–µ–∫—Ç MapsNews

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

–°–æ–∑–¥–∞–Ω —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –≥–µ–æ–∫–æ–¥–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ JSON-—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ —É–ª–∏—Ü:

### 1. **streets_database.json**
- –°–æ–¥–µ—Ä–∂–∏—Ç ~250 —É–ª–∏—Ü –ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫–∞
- –ü—Ä–æ—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –Ω–∞–∑–≤–∞–Ω–∏–π —É–ª–∏—Ü –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ
- –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è –Ω–æ–≤—ã–º–∏ —É–ª–∏—Ü–∞–º–∏

### 2. **json_geocoder.py**
–ü—Ä–æ—Å—Ç–æ–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –≥–µ–æ–∫–æ–¥–µ—Ä —Å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º:
1. –ü–æ–∏—Å–∫ —É–ª–∏—Ü—ã –∏–∑ JSON –≤ —Ç–µ–∫—Å—Ç–µ –Ω–æ–≤–æ—Å—Ç–∏
2. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –¥–æ–º–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
3. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ "–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫, —É–ª–∏—Ü–∞, –Ω–æ–º–µ—Ä"
4. –ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Yandex API

## üîß –ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ main.py

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–º–µ–Ω–∞ —Ç–µ–∫—É—â–µ–≥–æ –≥–µ–æ–∫–æ–¥–µ—Ä–∞

–û—Ç–∫—Ä–æ–π—Ç–µ `backend/main.py` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `extract_address`:

```python
# –í –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ –¥–æ–±–∞–≤—å—Ç–µ –∏–º–ø–æ—Ä—Ç
from json_geocoder import SimpleGeocoder

# –°–æ–∑–¥–∞–π—Ç–µ —ç–∫–∑–µ–º–ø–ª—è—Ä –≥–µ–æ–∫–æ–¥–µ—Ä–∞ (–ø–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–æ–≤)
json_geocoder = SimpleGeocoder()

# –ó–∞–º–µ–Ω–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é extract_address –Ω–∞:
def extract_address(text: str) -> Optional[str]:
    """–ò–∑–≤–ª–µ–∫–∞–µ—Ç –∞–¥—Ä–µ—Å –∏–∑ —Ç–µ–∫—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É—è JSON-—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫"""
    street = json_geocoder.find_street_in_text(text)
    if not street:
        return None
    
    building = json_geocoder.extract_building_number(text, street)
    
    if building:
        return f"–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫, {street}, {building}"
    else:
        return f"–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫, {street}"
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ JSON-–≥–µ–æ–∫–æ–¥–µ—Ä –∫–∞–∫ –ø–µ—Ä–≤—ã–π —É—Ä–æ–≤–µ–Ω—å, –∞ Natasha –∫–∞–∫ fallback:

```python
from json_geocoder import SimpleGeocoder

json_geocoder = SimpleGeocoder()

def extract_address(text: str) -> Optional[str]:
    # 1. –ü—Ä–æ–±—É–µ–º JSON-–≥–µ–æ–∫–æ–¥–µ—Ä (–±—ã—Å—Ç—Ä–æ)
    street = json_geocoder.find_street_in_text(text)
    if street:
        building = json_geocoder.extract_building_number(text, street)
        if building:
            return f"–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫, {street}, {building}"
        else:
            return f"–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫, {street}"
    
    # 2. Fallback –Ω–∞ Natasha (–µ—Å–ª–∏ JSON –Ω–µ –Ω–∞—à–µ–ª)
    # ... –≤–∞—à —Ç–µ–∫—É—â–∏–π –∫–æ–¥ —Å Natasha ...
```

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –≥–µ–æ–∫–æ–¥–µ—Ä–∞

‚úÖ **–°–∫–æ—Ä–æ—Å—Ç—å**: –ü–æ–∏—Å–∫ –ø–æ JSON –≤ 100+ —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ NLP
‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å**: –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π —Å–ø–∏—Å–æ–∫ —É–ª–∏—Ü
‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —É–ª–∏—Ü—ã
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–ª–æ–∂–Ω—ã—Ö NLP-–º–æ–¥–µ–ª–µ–π
‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è**: –ú–µ–Ω—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Yandex API (—Ç–æ–ª—å–∫–æ –¥–ª—è –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —É–ª–∏—Ü)

## üîç –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã

```
–¢–µ–∫—Å—Ç: "–î–¢–ü –Ω–∞ —É–ª–∏—Ü–µ –õ–µ–Ω–∏–Ω–∞, –¥–æ–º 5"
‚Üí –ù–∞–π–¥–µ–Ω–∞ —É–ª–∏—Ü–∞: "—É–ª–∏—Ü–∞ –ª–µ–Ω–∏–Ω–∞"
‚Üí –ù–∞–π–¥–µ–Ω –Ω–æ–º–µ—Ä: "5"
‚Üí –ê–¥—Ä–µ—Å: "–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫, —É–ª–∏—Ü–∞ –ª–µ–Ω–∏–Ω–∞, 5"
‚Üí Yandex API ‚Üí –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: [64.5410, 40.5435]

–¢–µ–∫—Å—Ç: "–ü–æ–∂–∞—Ä –Ω–∞ –¢—Ä–æ–∏—Ü–∫–æ–º –ø—Ä–æ—Å–ø–µ–∫—Ç–µ"
‚Üí –ù–∞–π–¥–µ–Ω–∞ —É–ª–∏—Ü–∞: "–ø—Ä–æ—Å–ø–µ–∫—Ç —Ç—Ä–æ–∏—Ü–∫–∏–π"
‚Üí –ù–æ–º–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω
‚Üí –ê–¥—Ä–µ—Å: "–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫, –ø—Ä–æ—Å–ø–µ–∫—Ç —Ç—Ä–æ–∏—Ü–∫–∏–π"
‚Üí Yandex API ‚Üí –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: [64.5390, 40.5410]
```

## üìù –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —É–ª–∏—Ü—ã

–û—Ç–∫—Ä–æ–π—Ç–µ `backend/streets_database.json` –∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤ –º–∞—Å—Å–∏–≤:

```json
{
  "streets": [
    "—É–ª–∏—Ü–∞ –ª–µ–Ω–∏–Ω–∞",
    "–ø—Ä–æ—Å–ø–µ–∫—Ç —Ç—Ä–æ–∏—Ü–∫–∏–π",
    "–≤–∞—à–∞ –Ω–æ–≤–∞—è —É–ª–∏—Ü–∞"  ‚Üê –¥–æ–±–∞–≤—å—Ç–µ —Å—é–¥–∞
  ]
}
```

**–í–∞–∂–Ω–æ**: –ù–∞–∑–≤–∞–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ!

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç:
```bash
cd backend
venv\Scripts\python.exe json_geocoder.py
```

–í—ã —É–≤–∏–¥–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π.

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≥–µ–æ–∫–æ–¥–µ—Ä –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç—è—Ö
2. –î–æ–±–∞–≤—å—Ç–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —É–ª–∏—Ü—ã –≤ JSON
3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ –≤ `main.py`
4. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏
